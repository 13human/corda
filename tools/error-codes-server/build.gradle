buildscript {
    ext.spring_boot_version = '2.0.5.RELEASE'
    ext.vertx_version = '3.5.3'
    ext.javax_annotation_api_version = '1.3.2'
    ext.javax_inject_version = '1'
    ext.reactor_version = '3.2.0.RELEASE'
    ext.konfig_version = '1.6.10.0'
    ext.junit_version = '5.3.1'
}

apply plugin: 'kotlin'
apply plugin: 'java'

description 'Corda error codes web-server'

//noinspection GroovyAssignabilityCheck
configurations {
    integrationTestCompile.extendsFrom testCompile
    integrationTestRuntime.extendsFrom testRuntime
}

sourceSets {
    integrationTest {
        kotlin {
            compileClasspath += main.output + test.output
            runtimeClasspath += main.output + test.output
            srcDir file('src/integration-test/kotlin')
        }
        java {
            compileClasspath += main.output + test.output
            runtimeClasspath += main.output + test.output
            srcDir file('src/integration-test/java')
        }
        resources {
            srcDir file('src/integration-test/resources')
        }
    }
}

dependencies {

    compile group: 'org.jetbrains.kotlin', name: 'kotlin-stdlib-jdk8', version: kotlin_version
    compile group: 'org.jetbrains.kotlin', name: 'kotlin-reflect', version: kotlin_version
    testCompile group: 'org.jetbrains.kotlin', name: 'kotlin-test', version: kotlin_version

    compile group: 'javax.inject', name: 'javax.inject', version: javax_inject_version
    compile group: 'javax.annotation', name: 'javax.annotation-api', version: javax_annotation_api_version

    compile group: 'org.springframework.boot', name: 'spring-boot', version: spring_boot_version
    compile group: 'org.springframework.boot', name: 'spring-boot-autoconfigure', version: spring_boot_version
    compile group: 'org.springframework.boot', name: 'spring-boot-starter-log4j2', version: spring_boot_version

    compile group: 'io.vertx', name: 'vertx-core', version: vertx_version
    compile group: 'io.vertx', name: 'vertx-web', version: vertx_version

    compile group: 'io.projectreactor', name: 'reactor-core', version: reactor_version

    compile group: 'com.natpryce', name: 'konfig', version: konfig_version

    testCompile group: 'org.junit.jupiter', name: 'junit-jupiter-api', version: junit_version
    testRuntime group: 'org.junit.jupiter', name: 'junit-jupiter-engine', version: junit_version
}